{"ast":null,"code":"var express = require('express');\n\nvar router = express.Router();\n\nvar mongo = require('mongodb');\n\nvar assert = require('assert');\n\nrouter.get('/', function (req, res, next) {\n  res.render('index');\n});\nvar url = 'mongodb://localhost:27017/test';\nrouter.get('/get-data', function (req, res, next) {\n  var resultArray = [];\n  mongo.connect(url, function (err, db) {\n    assert(null, err);\n    var cursor = db.collection('Match-Scores').find();\n    cursor.forEach(function (doc, err) {\n      assert(null, err);\n      resultArray.push(doc);\n    }, function () {\n      db.close();\n      res.render('index', {\n        items: resultArray\n      });\n    });\n  });\n});\nrouter.post('/insert', function (req, res, next) {\n  var item = {\n    description: req.body.description,\n    score: req.body.score,\n    stat: req.body.stat,\n    team1: req.body.team - 1,\n    team2: req.body.team - 2\n  };\n  mongo.connect(url, function (err, db) {\n    db.collection('Match-Scores').insertOne(item, function (err, result) {\n      assert(err, null);\n      console.log(\"Item has been inserted\\n\");\n      db.close();\n    });\n  });\n  res.redirect('/');\n});\nrouter.post('/update', function (req, res, next) {});\nrouter.post('/delete', function (req, res, next) {});","map":{"version":3,"sources":["C:/Users/manzo/Coding/WebDev/livescore/livescore/src/mongodb/accessdb.js"],"names":["express","require","router","Router","mongo","assert","get","req","res","next","render","url","resultArray","connect","err","db","cursor","collection","find","forEach","doc","push","close","items","post","item","description","body","score","stat","team1","team","team2","insertOne","result","console","log","redirect"],"mappings":"AAAA,IAAIA,OAAO,GAAGC,OAAO,CAAC,SAAD,CAArB;;AACA,IAAIC,MAAM,GAAGF,OAAO,CAACG,MAAR,EAAb;;AACA,IAAIC,KAAK,GAAGH,OAAO,CAAC,SAAD,CAAnB;;AACA,IAAII,MAAM,GAAGJ,OAAO,CAAC,QAAD,CAApB;;AAEAC,MAAM,CAACI,GAAP,CAAW,GAAX,EAAgB,UAASC,GAAT,EAAcC,GAAd,EAAmBC,IAAnB,EAAyB;AACrCD,EAAAA,GAAG,CAACE,MAAJ,CAAW,OAAX;AACH,CAFD;AAIA,IAAIC,GAAG,GAAG,gCAAV;AAEAT,MAAM,CAACI,GAAP,CAAW,WAAX,EAAwB,UAASC,GAAT,EAAcC,GAAd,EAAmBC,IAAnB,EAAyB;AAC7C,MAAIG,WAAW,GAAG,EAAlB;AACAR,EAAAA,KAAK,CAACS,OAAN,CAAcF,GAAd,EAAmB,UAASG,GAAT,EAAcC,EAAd,EAAkB;AACjCV,IAAAA,MAAM,CAAC,IAAD,EAAOS,GAAP,CAAN;AACA,QAAIE,MAAM,GAAGD,EAAE,CAACE,UAAH,CAAc,cAAd,EAA8BC,IAA9B,EAAb;AACAF,IAAAA,MAAM,CAACG,OAAP,CAAe,UAASC,GAAT,EAAcN,GAAd,EAAmB;AAC9BT,MAAAA,MAAM,CAAC,IAAD,EAAOS,GAAP,CAAN;AACAF,MAAAA,WAAW,CAACS,IAAZ,CAAiBD,GAAjB;AACH,KAHD,EAGG,YAAW;AACVL,MAAAA,EAAE,CAACO,KAAH;AACAd,MAAAA,GAAG,CAACE,MAAJ,CAAW,OAAX,EAAoB;AAACa,QAAAA,KAAK,EAAEX;AAAR,OAApB;AACH,KAND;AAOH,GAVD;AAWH,CAbD;AAeAV,MAAM,CAACsB,IAAP,CAAY,SAAZ,EAAuB,UAAUjB,GAAV,EAAeC,GAAf,EAAoBC,IAApB,EAA0B;AAC7C,MAAIgB,IAAI,GAAG;AACPC,IAAAA,WAAW,EAAEnB,GAAG,CAACoB,IAAJ,CAASD,WADf;AAEPE,IAAAA,KAAK,EAAErB,GAAG,CAACoB,IAAJ,CAASC,KAFT;AAGPC,IAAAA,IAAI,EAAEtB,GAAG,CAACoB,IAAJ,CAASE,IAHR;AAIPC,IAAAA,KAAK,EAAEvB,GAAG,CAACoB,IAAJ,CAASI,IAAT,GAAc,CAJd;AAKPC,IAAAA,KAAK,EAAEzB,GAAG,CAACoB,IAAJ,CAASI,IAAT,GAAc;AALd,GAAX;AAQA3B,EAAAA,KAAK,CAACS,OAAN,CAAcF,GAAd,EAAmB,UAASG,GAAT,EAAcC,EAAd,EAAkB;AACjCA,IAAAA,EAAE,CAACE,UAAH,CAAe,cAAf,EAA+BgB,SAA/B,CAAyCR,IAAzC,EAA+C,UAASX,GAAT,EAAcoB,MAAd,EAAsB;AACjE7B,MAAAA,MAAM,CAACS,GAAD,EAAM,IAAN,CAAN;AACAqB,MAAAA,OAAO,CAACC,GAAR,CAAY,0BAAZ;AACArB,MAAAA,EAAE,CAACO,KAAH;AACH,KAJD;AAKH,GAND;AAQAd,EAAAA,GAAG,CAAC6B,QAAJ,CAAa,GAAb;AACH,CAlBD;AAoBAnC,MAAM,CAACsB,IAAP,CAAY,SAAZ,EAAuB,UAAUjB,GAAV,EAAeC,GAAf,EAAoBC,IAApB,EAA0B,CAEhD,CAFD;AAIAP,MAAM,CAACsB,IAAP,CAAY,SAAZ,EAAuB,UAAUjB,GAAV,EAAeC,GAAf,EAAoBC,IAApB,EAA0B,CAEhD,CAFD","sourcesContent":["var express = require('express');\r\nvar router = express.Router();\r\nvar mongo = require('mongodb');\r\nvar assert = require('assert');\r\n\r\nrouter.get('/', function(req, res, next) {\r\n    res.render('index');\r\n});\r\n\r\nvar url = 'mongodb://localhost:27017/test';\r\n\r\nrouter.get('/get-data', function(req, res, next) {\r\n    var resultArray = [];\r\n    mongo.connect(url, function(err, db) {\r\n        assert(null, err);\r\n        var cursor = db.collection('Match-Scores').find();\r\n        cursor.forEach(function(doc, err) {\r\n            assert(null, err);\r\n            resultArray.push(doc);\r\n        }, function() {\r\n            db.close();\r\n            res.render('index', {items: resultArray});\r\n        });\r\n    });\r\n});\r\n\r\nrouter.post('/insert', function (req, res, next) {\r\n    var item = {\r\n        description: req.body.description,\r\n        score: req.body.score,\r\n        stat: req.body.stat,\r\n        team1: req.body.team-1,\r\n        team2: req.body.team-2,\r\n    }\r\n\r\n    mongo.connect(url, function(err, db) {\r\n        db.collection ('Match-Scores').insertOne(item, function(err, result) {\r\n            assert(err, null);\r\n            console.log(\"Item has been inserted\\n\");\r\n            db.close();\r\n        });\r\n    });\r\n\r\n    res.redirect('/');\r\n});\r\n\r\nrouter.post('/update', function (req, res, next) {\r\n\r\n});\r\n\r\nrouter.post('/delete', function (req, res, next) {\r\n\r\n});\r\n"]},"metadata":{},"sourceType":"module"}